<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- basic -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- mobile metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<!-- site metas -->
<title>航空票务系统</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">	
<!-- bootstrap css -->
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<!-- style css -->
<link rel="stylesheet" type="text/css" href="css/style.css">
<!-- Responsive-->
<link rel="stylesheet" href="css/responsive.css">
<!-- fevicon -->
<link rel="icon" href="images/fevicon.png" type="image/gif" />
<!-- Scrollbar Custom CSS -->
<link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
<!-- Tweaks for older IEs-->
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
<!-- owl stylesheets --> 
<link rel="stylesheet" href="css/owl.carousel.min.css">
<link rel="stylesheet" href="css/owl.theme.default.min.css">
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
<style> 
    .real-time-clock {
        font-size: 14px;
        color: #fff;
        background-color: #000;
        padding: 5px 10px;
        border-radius: 5px;
        position: relative;
        top: -50px;
        right: 10px;
        z-index: 9999;
    }
</style>
</head>
<body>
	<!-- header section start -->
	<div class="header_section">
		<div class="container">
			<nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="logo"><a href="index.html"><img src="images/logo.png"></a></div>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                   <a class="nav-item nav-link" href="main.html">主页</a>
				   <a class="nav-item nav-link" href="search.html">航班查询</a>
                   <a class="nav-item nav-link" href="booking.html">订单管理</a>
                   <a class="nav-item nav-link" href="personal.html">个人信息管理</a>
                   <a class="nav-item nav-link" href="admin.html">管理员操作</a>
                </div>
            </nav>
            <!-- 实时时间控件 -->
                <div class="real-time-clock" style="float: right; margin-right: 10px;">
                    <span id="beijing-time">加载中...</span>
                </div>
		</div>
    </div>    
	<!-- header section end -->
	
    <!-- filter && results section start -->
	<!-- 航班查询筛选条件和航班信息展示部分 -->
    <div class="layout_padding promoted_section">
        <div class="container">
            <!-- 筛选条件部分 -->
            <div class="filter_section">
                <h1 class="filter_heading" onclick="changeTitle()" id = 'title_search'>航班查询</h1>
                <form id="flightFilterForm">
                    <div class="form-row">
                        <div class="col-md-3">
                            <label for="departure">出发地</label>
                            <input type="text" class="form-control" id="departure" placeholder="请输入出发地">
                        </div>
                        <div class="col-md-3">
                            <label for="destination">目的地</label>
                            <input type="text" class="form-control" id="destination" placeholder="请输入目的地">
                        </div>
                        <div class="col-md-3">
                            <label for="departureDate">出发日期</label>
                            <input type="date" class="form-control" id="departureDate" placeholder="请选择出发日期">
                        </div>
                        <div class="col-md-3">
                            <button type="submit" class="btn btn-primary" id="searchButton">查询</button>
                        </div>
                    </div>
                    <hr>
                    <!-- 更多筛选条件 -->
                    <div class="additional_filters">
                        <div class="form-group">
                            <label>航班类型</label>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="checkbox1" value="option1">
                                <label class="form-check-label" for="checkbox1">经济舱</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="checkbox2" value="option2">
                                <label class="form-check-label" for="checkbox2">商务舱</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="checkbox3" value="option3">
                                <label class="form-check-label" for="checkbox3">头等舱</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- 筛选条件部分结束 -->
            <!-- 航班信息展示部分 -->
            <div class="flight_results">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>航班号</th>
                            <th>出发地</th>
                            <th>目的地</th>
                            <th>出发时间</th>
                            <th>到达时间</th>
                            <th>历时</th>
                            <th>经济舱</th>
                            <th>商务舱</th>
                            <th>头等舱</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Flight123</td>
                            <td>北京</td>
                            <td>上海</td>
                            <td>08:00</td>
                            <td>10:00</td>
                            <td>2小时</td>
                            <td>有票</td>
                            <td>无票</td>
                            <td>有票</td>
                            <td><button class="btn btn-primary">预定</button></td>
                        </tr>
                        <tr>
                            <td>Flight456</td>
                            <td>北京</td>
                            <td>广州</td>
                            <td>09:30</td>
                            <td>12:30</td>
                            <td>3小时</td>
                            <td>无票</td>
                            <td>有票</td>
                            <td>无票</td>
                            <td><button class="btn btn-primary">预定</button></td>
                        </tr>
                        <tr>
                            <td>Flight789</td>
                            <td>上海</td>
                            <td>深圳</td>
                            <td>14:00</td>
                            <td>17:00</td>
                            <td>3小时</td>
                            <td>有票</td>
                            <td>有票</td>
                            <td>无票</td>
                            <td><button class="btn btn-primary">预定</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- filter && results section end -->
    </div>
    

	<!-- footer section start -->
	<div class="layout_padding footer_section">
		<div class="container">
		  <div class="row">
			<div class="col-sm-6 col-md-6 col-lg-3">
			  <div class="footer_logo"><img src="images/footer-logo.png"></div>
			  <!-- 下标注释，即网页下部的内容注释 -->
			  <p class="dolor_text">华航航空航班票务系统 <br>Copyright © 2025 All rights reserved.</p>
			</div>
			<div class="col-sm-6 col-md-6 col-lg-3">
			  <h1 class="quick_text">更多功能</h1>
			  <div class="chevron_arrow"><img src="images/chevron-arrow.png"><span class="padding-left">加入我们</span></div>
			  <div class="chevron_arrow"><img src="images/chevron-arrow.png"><span class="padding-left">维护者</span></div>
			  <div class="chevron_arrow"><img src="images/chevron-arrow.png"><span class="padding-left">版本状态</span></div>
			</div>
			<div class="col-sm-6 col-md-6 col-lg-3">
			  <h1 class="quick_text">联系我们</h1>
			  <div class="map_flag"><img src="images/map-flag.png"><span class="padding-left">123 Main Street, Anytown USA</span></div>
			  <div class="map_flag"><img src="images/email-icon.png"><span class="padding-left">abcd@gmail.com</span></div>
			  <div class="map_flag"><img src="images/phone-icon.png"><span class="padding-left">+123 456 7890</span></div>
			</div>
		  </div>
		</div>
	  </div>
	<!-- footer section end -->
	<!-- copyright section end -->
    <!-- Javascript files-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/plugin.js"></script>
    <!-- sidebar -->
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/custom.js"></script>
    <!-- javascript --> 
    <script src="js/owl.carousel.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>

    <!-- 航班查询功能 -->
    <script>
        document.getElementById('searchButton').addEventListener('click', async () => {
    const departure = document.getElementById('departure').value;
    const destination = document.getElementById('destination').value;
    const departureDate = document.getElementById('departureDate').value;

    // 发送查询请求
    try {
        const response = await fetch(`/api/flights?departure=${departure}&destination=${destination}&departureDate=${departureDate}`);
        const data = await response.json();

        // 清空表格
        const tableBody = document.querySelector('#flightResultsTable tbody');
        tableBody.innerHTML = '';

        if (data.length === 0) {
            alert('未找到匹配的航班信息');
        } else {
            // 动态生成表格行
            data.forEach(flight => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${flight.flight_number}</td>
                    <td>${flight.departure_city}</td>
                    <td>${flight.arrival_city}</td>
                    <td>${flight.departure_time}</td>
                    <td>${flight.arrival_time}</td>
                    <td>${flight.duration}</td>
                    <td>${flight.economy_seats === 0 ? '无票' : '有票'}</td>
                    <td>${flight.business_seats === 0 ? '无票' : '有票'}</td>
                    <td>${flight.first_class_seats === 0 ? '无票' : '有票'}</td>
                    <td><button class="btn btn-primary">预定</button></td>
                `;
                tableBody.appendChild(tr);
            });

            // 显示航班信息表格
            document.querySelector('.flight_results').style.display = 'block';
        }
    } catch (error) {
        console.error('Error fetching flights:', error);
        alert('查询失败，请稍后再试。');
    }
});
    </script>
    <script>
        function changeTitle(){
            element = document.getElementById("title_search");
            if(element.innerHTML.match("航班查询")){
                element.innerHTML = "竭诚为您提供最优质的航班服务";
                element.style.color = "purple";
            }
            else{
                element.innerHTML = "航班查询";
                element.style.color = "black";
            }
        }

    </script>

    <script>
        // script.js
        document.addEventListener('DOMContentLoaded', () => {
        // 获取实时时间控件
        const beijingTimeElement = document.getElementById('beijing-time');

        // 获取当前时间并格式化
        function updateBeijingTime() {
            const now = new Date();
            // 直接使用中国时区格式化
            const formattedTime = now.toLocaleString('zh-CN', {
                timeZone: 'Asia/Shanghai',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            }).replace(/\//g, '-');
            // 更新界面显示
            beijingTimeElement.textContent = `北京时间: ${formattedTime}`;
        }

            // 初始加载时更新时间
            updateBeijingTime();

            // 每秒更新一次时间
            setInterval(updateBeijingTime, 1000);
        });
    </script>
    </body>
</html>
